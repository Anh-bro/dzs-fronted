import{_ as A,B as v,C as N,D as R,F as q,G as j,H as w,o as d,j as V,w as o,I as L,J as O,a,d as r,t as _,c as u,k as S,b as m,K as C,L as E,e as z,M as G,N as H,O as J,h as K,P as Q,f as W,E as X,Q as Y,R as Z}from"./index-a735f570.js";/* empty css                    *//* empty css                     *//* empty css                */const $={watch:{filterText(e){this.$refs.tree.filter(e)}},mounted(){this.$route.query.aid!=null&&(this.aid=this.$route.query.aid,this.expandkey.push(Number(this.$route.query.aid)),this.fetchPassageNote(this.$route.query.aid)),console.log(this.expandkey),this.fetchData(this.aid)},methods:{async fetchPassageNote(e){await v(e).then(t=>{console.log(t),this.textData=t.data}),await N(e).then(t=>{console.log(t),this.noteData=t.data})},async fetchData(){console.log(this.aid),await R().then(e=>{console.log("index"),console.log(e),this.data=e.data}),this.loading=!1,console.log(this.expandkey)},async fetchNote(){await N(this.aid).then(e=>{this.noteData=e.data})},async addNote(){this.tempnote.aid=this.aid,await q(this.tempnote).then(e=>{console.log(e)}),this.fetchNote(),this.dialogFormVisible=!1},handleNote(e){var i;console.log(e),this.orderid=e,this.tempnote.orderid=e;let t=this.noteData.filter(p=>p.orderid==e);this.tempnote.content=(i=t[0])==null?void 0:i.content,this.dialogFormVisible=!0},markText(e){e.target.id.split("-")[0],e.target.id.split("-")[1],e.target.style["background-color"]?(e.target.style["background-color"]="",reduceMark(e.target.id)):(e.target.style["background-color"]="yellow",addMark(e.target.id))},randerNote(){let e=0;for(e=0;e<this.noteData.length;e++)document.getElementById(this.noteData[e].orderid).innerText+=this.noteData[e].content},randerMark(){console.log("randmark ");let e=0;for(e=0;e<this.markData.length;e++)document.getElementById(this.markData[e]).style.cssText="background-color:yellow"},goAnchor(e){var t=document.getElementById(e);console.log(t),this.$refs.page.scrollTo({top:t.offsetTop,left:0,behavior:"smooth"})},onDelete(){this.count>0&&this.count--},add(){this.goAnchor(9)},filterNode(e,t){return e?t.label.indexOf(e)!==-1:!0},async jump(e,t){console.log("id",e.data.id),this.aid=e.data.id,this.loading=!0,await v(e.data.id).then(i=>{console.log("getPassage",i),this.textData=i.data,console.log(this.textData)}),await j(e.data.id).then(i=>{console.log("getNote",i),this.noteData=i.data}),this.$forceUpdate(),this.loading=!1},remove(e,t){const i=e.parent,p=i.data.children||i.data,n=p.findIndex(s=>s.id===t.id);p.splice(n,1)}},data(){return{pid:1,aid:0,dialogFormVisible:!1,expandkey:[],loading:!0,filterText:"",count:23,noteindex:2,tempnote:{noteid:0,content:""},noteData:[],markData:["3-2"],textData:[],data:[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]},{id:11,label:"一级 4",children:[{id:12,label:"二级 4-1"},{id:13,label:"二级 4-2"},{id:14,label:"二级 4-3"},{id:15,label:"二级 4-4"}]}],defaultProps:{children:"children",label:"label"}}}},ee={class:"custom-tree-node"},te={key:0},oe=["onClick"],le={class:"dohistry",style:{height:"140px"}},ae=["id"],ne=["src"],ie=["onClick"],se={class:"note"},de=["id"],re={class:"dialog-footer"};function ce(e,t,i,p,n,s){const y=z,T=G,k=H,b=J,g=K,x=Q,B=W,F=X,I=Y,M=L,D=O;return w((d(),V(M,{gutter:"20"},{default:o(()=>[a(x,{span:6,style:{"overflow-x":"hidden"}},{default:o(()=>[w((d(),V(b,{shadow:"hover",onClick:e.clickTreeNode},{default:o(()=>[a(y,{placeholder:"输入关键字进行过滤",modelValue:n.filterText,"onUpdate:modelValue":t[0]||(t[0]=l=>n.filterText=l)},null,8,["modelValue"]),a(k,null,{default:o(()=>[a(T,{style:{"max-height":"350px"},class:"filter-tree",data:n.data,props:n.defaultProps,"filter-node-method":s.filterNode,"node-key":"id","default-expanded-keys":n.expandkey,ref:"tree"},{default:o(({node:l,data:c})=>[r("span",ee,[r("span",null,_(l.label),1),c.children.length==0?(d(),u("span",te,[r("a",{onClick:f=>s.jump(l,c)}," 跳转 ",8,oe)])):S("",!0)])]),_:1},8,["data","props","filter-node-method","default-expanded-keys"])]),_:1})]),_:1},8,["onClick"])),[[D,n.loading]]),a(b,{shadow:"hover",style:{"margin-top":"20px"}},{default:o(()=>[r("div",le,[a(g,{onClick:e.open},{default:o(()=>[m("Add Item")]),_:1},8,["onClick"]),a(g,{onClick:s.onDelete},{default:o(()=>[m("Delete Item")]),_:1},8,["onClick"])])]),_:1})]),_:1}),a(x,{style:{"overflow-x":"hidden"},span:18,ref:"asd"},{default:o(()=>[a(k,{"max-height":"600px",ref:"page",style:{"scroll-bahavior":"smooth"}},{default:o(()=>[(d(!0),u(E,null,C(n.textData,(l,c)=>{var f;return d(),u("div",{class:Z([l.level,"pa"]),onMouseup:t[2]||(t[2]=(...h)=>e.handleMouseUp&&e.handleMouseUp(...h))},[l.level!="img"?(d(!0),u(E,{key:0},C(l.content.split(new RegExp("(?=，)|(?<=，)|(?=；)|(?<=；)|(?=。)|(?<=。)")),(h,P)=>(d(),u("a",{onClick:t[1]||(t[1]=U=>s.markText(U)),class:"sentence",id:c+"-"+P},_(h),9,ae))),256)):(d(),u("img",{key:1,src:l.content,alt:"暂无"},null,8,ne)),r("button",{size:"mini",class:"addNoteBtn",onClick:h=>s.handleNote(c)},"笔记",8,ie),r("div",se,[r("div",{id:c,style:{display:"block"}},_((f=n.noteData.filter(h=>h.orderid==c)[0])==null?void 0:f.content),9,de)])],34)}),256)),a(I,{modelValue:n.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=l=>n.dialogFormVisible=l),title:"Shipping address"},{footer:o(()=>[r("span",re,[a(g,{onClick:t[4]||(t[4]=l=>n.dialogFormVisible=!1)},{default:o(()=>[m("取消")]),_:1}),a(g,{type:"primary",onClick:t[5]||(t[5]=l=>s.addNote())},{default:o(()=>[m(" 确定 ")]),_:1})])]),default:o(()=>[a(F,null,{default:o(()=>[a(B,{label:"Activity form"},{default:o(()=>[a(y,{modelValue:this.tempnote.content,"onUpdate:modelValue":t[3]||(t[3]=l=>this.tempnote.content=l),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},512)]),_:1},512)]),_:1})),[[D,n.loading]])}const me=A($,[["render",ce]]);export{me as default};
